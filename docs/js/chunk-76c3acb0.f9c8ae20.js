(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76c3acb0"],{"1dc3":function(e,t,l){"use strict";var s=l("e714"),a=l.n(s);a.a},"26bf":function(e,t,l){"use strict";l.r(t);var s=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"project"},[e._m(0),l("el-card",{attrs:{shadow:"hover"}},[l("header",{attrs:{slot:"header"},slot:"header"},[e._v("项目")]),l("el-form",{staticClass:"form-inline",attrs:{inline:"",size:"mini",disabled:"","label-width":"110px"}},[l("el-form-item",{staticClass:"block",attrs:{label:"项目名称",prop:"xmmc"}},[l("el-input",{staticClass:"name",model:{value:e.applyProject.xmmc,callback:function(t){e.$set(e.applyProject,"xmmc",t)},expression:"applyProject.xmmc"}})],1),l("el-form-item",{attrs:{label:"出国/出境",prop:"typeid"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.applyProject.typeid,callback:function(t){e.$set(e.applyProject,"typeid",t)},expression:"applyProject.typeid"}},e._l(e.placeList,function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),l("el-form-item",{attrs:{label:"立项单位",prop:"lxdwid"}},[l("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.applyProject.lxdwid,callback:function(t){e.$set(e.applyProject,"lxdwid",t)},expression:"applyProject.lxdwid"}},e._l(e.deptList,function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),l("el-form-item",{attrs:{label:"项目负责人",prop:"xmfzr"}},[l("el-input",{staticClass:"select",model:{value:e.applyProject.xmfzr,callback:function(t){e.$set(e.applyProject,"xmfzr",t)},expression:"applyProject.xmfzr"}})],1),l("el-form-item",{attrs:{label:"负责人电话",prop:"xmfzrdh"}},[l("el-input",{staticClass:"select",model:{value:e.applyProject.xmfzrdh,callback:function(t){e.$set(e.applyProject,"xmfzrdh",t)},expression:"applyProject.xmfzrdh"}})],1)],1)],1),l("el-card",{attrs:{shadow:"hover"}},[l("header",{attrs:{slot:"header"},slot:"header"},[e._v("学生基本信息")]),l("el-form",{staticClass:"form-inline",attrs:{inline:"",size:"mini","label-width":"110px"}},[l("el-form-item",{attrs:{label:"姓名"}},[l("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.xm,callback:function(t){e.$set(e.studentInfo,"xm",t)},expression:"studentInfo.xm"}})],1),l("el-form-item",{attrs:{label:"学号"}},[l("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.xh,callback:function(t){e.$set(e.studentInfo,"xh",t)},expression:"studentInfo.xh"}})],1),l("el-form-item",{attrs:{label:"性别"}},[l("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.xb,callback:function(t){e.$set(e.studentInfo,"xb",t)},expression:"studentInfo.xb"}})],1),l("el-form-item",{attrs:{label:"学院"}},[l("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.xy,callback:function(t){e.$set(e.studentInfo,"xy",t)},expression:"studentInfo.xy"}})],1),l("el-form-item",{attrs:{label:"专业"}},[l("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.zy,callback:function(t){e.$set(e.studentInfo,"zy",t)},expression:"studentInfo.zy"}})],1),l("el-form-item",{attrs:{label:"班级"}},[l("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.bj,callback:function(t){e.$set(e.studentInfo,"bj",t)},expression:"studentInfo.bj"}})],1),l("el-form-item",{attrs:{label:"培养层次"}},[l("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.pycc,callback:function(t){e.$set(e.studentInfo,"pycc",t)},expression:"studentInfo.pycc"}})],1),l("el-form-item",{attrs:{label:"政治面貌"}},[l("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.zzmm,callback:function(t){e.$set(e.studentInfo,"zzmm",t)},expression:"studentInfo.zzmm"}})],1),l("el-form-item",{attrs:{label:"证件类型"}},[l("el-select",{attrs:{placeholder:"请选择"},model:{value:e.apply.zjlx,callback:function(t){e.$set(e.apply,"zjlx",t)},expression:"apply.zjlx"}},[l("el-option",{attrs:{label:"护照",value:"护照"}}),l("el-option",{attrs:{label:"身份证",value:"身份证"}}),l("el-option",{attrs:{label:"台胞证",value:"台胞证"}}),l("el-option",{attrs:{label:"回乡证",value:"回乡证"}}),l("el-option",{attrs:{label:"港澳台居民居住证",value:"港澳台居民居住证"}})],1)],1),l("el-form-item",{attrs:{label:"证件号码"}},[l("el-input",{model:{value:e.apply.zjhm,callback:function(t){e.$set(e.apply,"zjhm",t)},expression:"apply.zjhm"}})],1),l("el-form-item",{attrs:{label:"外语语种"}},[l("el-input",{model:{value:e.apply.wyyz,callback:function(t){e.$set(e.apply,"wyyz",t)},expression:"apply.wyyz"}})],1),l("el-form-item",{attrs:{label:"外语水平"}},[l("el-input",{model:{value:e.apply.wysp,callback:function(t){e.$set(e.apply,"wysp",t)},expression:"apply.wysp"}})],1),l("el-form-item",{attrs:{label:"联系电话"}},[l("el-input",{model:{value:e.apply.lxdh,callback:function(t){e.$set(e.apply,"lxdh",t)},expression:"apply.lxdh"}})],1),l("el-form-item",{attrs:{label:"电子邮箱"}},[l("el-input",{model:{value:e.apply.email,callback:function(t){e.$set(e.apply,"email",t)},expression:"apply.email"}})],1),l("el-form-item",{attrs:{label:"健康状况"}},[l("el-input",{model:{value:e.apply.jkzk,callback:function(t){e.$set(e.apply,"jkzk",t)},expression:"apply.jkzk"}})],1)],1)],1),l("el-card",{attrs:{shadow:"hover"}},[l("header",{attrs:{slot:"header"},slot:"header"},[e._v("申请表")]),l("el-form",{staticClass:"form-inline",attrs:{inline:"",size:"medium","label-width":"110px"}},[l("el-form-item",{staticClass:"block",attrs:{label:"申请理由"}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请填写项目申请理由（2000字以内）"},model:{value:e.apply.sqly,callback:function(t){e.$set(e.apply,"sqly",t)},expression:"apply.sqly"}})],1),l("el-form-item",{staticClass:"block",attrs:{label:"计划安排"}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"如果是长期学习交流，需要填写详细学习计划（学习/会议/比赛等的内容/计划/安排）"},model:{value:e.apply.jhap,callback:function(t){e.$set(e.apply,"jhap",t)},expression:"apply.jhap"}})],1),l("el-form-item",{attrs:{label:"成绩单"}},[l("el-upload",{staticClass:"img-upload",attrs:{action:e.$proxy+"/upload/uploadFile","show-file-list":!1,"on-success":e.handleSuccess1}},[e.apply.cjd?l("img",{staticClass:"img",attrs:{src:e.$proxy+e.imgUrl+e.apply.cjd}}):l("i",{staticClass:"el-icon-plus icon"})])],1),l("el-form-item",{attrs:{label:"外语成绩证明"}},[l("el-upload",{staticClass:"img-upload",attrs:{action:e.$proxy+"/upload/uploadFile","show-file-list":!1,"on-success":e.handleSuccess2}},[e.apply.wycjzm?l("img",{staticClass:"img",attrs:{src:e.$proxy+e.imgUrl+e.apply.wycjzm}}):l("i",{staticClass:"el-icon-plus icon"})])],1),l("el-form-item",{attrs:{label:"护照首页"}},[l("el-upload",{staticClass:"img-upload",attrs:{action:e.$proxy+"/upload/uploadFile","show-file-list":!1,"on-success":e.handleSuccess3}},[e.apply.hzsy?l("img",{staticClass:"img",attrs:{src:e.$proxy+e.imgUrl+e.apply.hzsy}}):l("i",{staticClass:"el-icon-plus icon"})])],1),l("el-form-item",{staticClass:"block",attrs:{label:"其他材料"}},[l("el-upload",{attrs:{action:e.$proxy+"/upload/uploadFile","on-remove":e.handleRemove,"on-success":e.handleSuccess}},[l("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[e._v("点击上传")]),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传doc/docx文件，且不超过2M")])],1)],1),l("el-form-item",{staticClass:"submit"},[l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v("确认提交")])],1)],1)],1)],1)},a=[function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("fieldset",[l("legend",[e._v("学生申请表")])])}],i=(l("7f7f"),l("2909")),o={name:"project",data:function(){return{placeList:[],deptList:[],studentInfo:"",apply:{projectId:"",studentId:"",zjlx:"",zjhm:"",wyyz:"",wysp:"",lxdh:"",email:"",jkzk:"",sqly:"",jhap:"",cjd:"",wycjzm:"",hzsy:"",qtfile:""},imgUrl:"/resource/showImg?path=",fileList:[],archiveFileList:[]}},computed:{role:function(){return this.$store.state.role},applyProject:function(){return this.$store.state.applyProject}},created:function(){this.getInfo(),this.applyProject.id||this.$router.push("/project/list/student")},methods:{getInfo:function(){var e=this;this.$ajax.post("student/getInfo").then(function(t){e.studentInfo=t.data.data.data})},handleSuccess1:function(e,t,l){"0"===e.errcode?this.apply.cjd=e.path:this.$message.error(e.errmsg)},handleSuccess2:function(e,t,l){"0"===e.errcode?this.apply.wycjzm=e.path:this.$message.error(e.errmsg)},handleSuccess3:function(e,t,l){"0"===e.errcode?this.apply.hzsy=e.path:this.$message.error(e.errmsg)},handleRemove:function(e,t){var l=this;console.log(e);var s=e.url?e.url:e.response.path;this.$ajax.post("/resource/deleteFile",{path:s}).then(function(e){"0"===e.data.errcode?(l.fileList=Object(i["a"])(t),console.log(l.fileList)):l.$message.error(e.data.errmsg)})},handleSuccess:function(e,t,l){"0"===e.errcode?(this.fileList=Object(i["a"])(l),console.log(this.fileList)):this.$message.error(e.message)},submitForm:function(){var e=this;this.apply.projectId=this.applyProject.id,this.archiveFileList=[];for(var t=0;t<this.fileList.length;t++)this.fileList[t].response?this.archiveFileList.push({url:this.fileList[t].response.path,name:this.fileList[t].name}):this.archiveFileList.push({url:this.fileList[t].url,name:this.fileList[t].name});this.archiveFileList.length>0&&(this.apply.qtfile=JSON.stringify(this.archiveFileList)),this.$ajax.post("/projectApply/add",this.apply).then(function(t){"0"===t.data.errcode?(e.$message.success("申请已提交"),e.$router.push("/project/apply/list")):e.$message.error(t.data.errmsg)})},resetForm:function(e){this.$refs[e].resetFields()}}},r=o,n=(l("1dc3"),l("2877")),p=Object(n["a"])(r,s,a,!1,null,null,null);p.options.__file="apply.vue";t["default"]=p.exports},2909:function(e,t,l){"use strict";function s(e){if(Array.isArray(e)){for(var t=0,l=new Array(e.length);t<e.length;t++)l[t]=e[t];return l}}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){return s(e)||a(e)||i()}l.d(t,"a",function(){return o})},e714:function(e,t,l){}}]);
//# sourceMappingURL=chunk-76c3acb0.f9c8ae20.js.map