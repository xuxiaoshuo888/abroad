(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc186e78"],{2909:function(e,t,a){"use strict";function l(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function s(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){return l(e)||s(e)||r()}a.d(t,"a",function(){return o})},7040:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"project"},[e._m(0),a("el-card",{attrs:{shadow:"hover"}},[a("header",{attrs:{slot:"header"},slot:"header"},[e._v("项目")]),a("el-form",{staticClass:"form-inline",attrs:{inline:"",size:"mini",disabled:"","label-width":"110px"}},[a("el-form-item",{staticClass:"block",attrs:{label:"项目名称",prop:"xmmc"}},[a("el-input",{staticClass:"name",model:{value:e.applyProject.xmmc,callback:function(t){e.$set(e.applyProject,"xmmc",t)},expression:"applyProject.xmmc"}})],1),a("el-form-item",{attrs:{label:"出国/出境",prop:"typeid"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.applyProject.typename,callback:function(t){e.$set(e.applyProject,"typename",t)},expression:"applyProject.typename"}},e._l(e.placeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"立项单位",prop:"lxdwid"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.applyProject.lxdwmc,callback:function(t){e.$set(e.applyProject,"lxdwmc",t)},expression:"applyProject.lxdwmc"}},e._l(e.deptList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"项目负责人",prop:"xmfzr"}},[a("el-input",{staticClass:"select",model:{value:e.applyProject.xmfzr,callback:function(t){e.$set(e.applyProject,"xmfzr",t)},expression:"applyProject.xmfzr"}})],1),a("el-form-item",{attrs:{label:"负责人电话",prop:"xmfzrdh"}},[a("el-input",{staticClass:"select",model:{value:e.applyProject.xmfzrdh,callback:function(t){e.$set(e.applyProject,"xmfzrdh",t)},expression:"applyProject.xmfzrdh"}})],1)],1)],1),a("el-card",{attrs:{shadow:"hover"}},[a("header",{attrs:{slot:"header"},slot:"header"},[e._v("学生基本信息")]),a("el-form",{staticClass:"form-inline",attrs:{inline:"",size:"mini",disabled:"","label-width":"110px"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.xm,callback:function(t){e.$set(e.studentInfo,"xm",t)},expression:"studentInfo.xm"}})],1),a("el-form-item",{attrs:{label:"学号"}},[a("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.xh,callback:function(t){e.$set(e.studentInfo,"xh",t)},expression:"studentInfo.xh"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.xb,callback:function(t){e.$set(e.studentInfo,"xb",t)},expression:"studentInfo.xb"}})],1),a("el-form-item",{attrs:{label:"学院"}},[a("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.xy,callback:function(t){e.$set(e.studentInfo,"xy",t)},expression:"studentInfo.xy"}})],1),a("el-form-item",{attrs:{label:"专业"}},[a("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.zy,callback:function(t){e.$set(e.studentInfo,"zy",t)},expression:"studentInfo.zy"}})],1),a("el-form-item",{attrs:{label:"班级"}},[a("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.bj,callback:function(t){e.$set(e.studentInfo,"bj",t)},expression:"studentInfo.bj"}})],1),a("el-form-item",{attrs:{label:"培养层次"}},[a("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.pycc,callback:function(t){e.$set(e.studentInfo,"pycc",t)},expression:"studentInfo.pycc"}})],1),a("el-form-item",{attrs:{label:"政治面貌"}},[a("el-input",{attrs:{disabled:""},model:{value:e.studentInfo.zzmm,callback:function(t){e.$set(e.studentInfo,"zzmm",t)},expression:"studentInfo.zzmm"}})],1),a("el-form-item",{attrs:{label:"证件类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.apply.zjlx,callback:function(t){e.$set(e.apply,"zjlx",t)},expression:"apply.zjlx"}},[a("el-option",{attrs:{label:"护照",value:"护照"}}),a("el-option",{attrs:{label:"身份证",value:"身份证"}}),a("el-option",{attrs:{label:"台胞证",value:"台胞证"}}),a("el-option",{attrs:{label:"回乡证",value:"回乡证"}}),a("el-option",{attrs:{label:"港澳台居民居住证",value:"港澳台居民居住证"}})],1)],1),a("el-form-item",{attrs:{label:"证件号码"}},[a("el-input",{model:{value:e.apply.zjhm,callback:function(t){e.$set(e.apply,"zjhm",t)},expression:"apply.zjhm"}})],1),a("el-form-item",{attrs:{label:"外语语种"}},[a("el-input",{model:{value:e.apply.wyyz,callback:function(t){e.$set(e.apply,"wyyz",t)},expression:"apply.wyyz"}})],1),a("el-form-item",{attrs:{label:"外语水平"}},[a("el-input",{model:{value:e.apply.wysp,callback:function(t){e.$set(e.apply,"wysp",t)},expression:"apply.wysp"}})],1),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{model:{value:e.apply.lxdh,callback:function(t){e.$set(e.apply,"lxdh",t)},expression:"apply.lxdh"}})],1),a("el-form-item",{attrs:{label:"电子邮箱"}},[a("el-input",{model:{value:e.apply.email,callback:function(t){e.$set(e.apply,"email",t)},expression:"apply.email"}})],1),a("el-form-item",{attrs:{label:"健康状况"}},[a("el-input",{model:{value:e.apply.jkzk,callback:function(t){e.$set(e.apply,"jkzk",t)},expression:"apply.jkzk"}})],1)],1)],1),a("el-card",{attrs:{shadow:"hover"}},[a("header",{attrs:{slot:"header"},slot:"header"},[e._v("申请表")]),a("el-form",{staticClass:"form-inline",attrs:{inline:"",size:"medium",disabled:"","label-width":"110px"}},[a("el-form-item",{staticClass:"block",attrs:{label:"申请理由"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"请填写项目申请理由（2000字以内）"},model:{value:e.apply.sqly,callback:function(t){e.$set(e.apply,"sqly",t)},expression:"apply.sqly"}})],1),a("el-form-item",{staticClass:"block",attrs:{label:"计划安排"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"如果是长期学习交流，需要填写详细学习计划（学习/会议/比赛等的内容/计划/安排）"},model:{value:e.apply.jhap,callback:function(t){e.$set(e.apply,"jhap",t)},expression:"apply.jhap"}})],1)],1)],1),a("el-card",{attrs:{shadow:"hover"}},[a("header",{attrs:{slot:"header"},slot:"header"},[e._v("登记")]),a("el-form",{staticClass:"form-inline",attrs:{inline:"",size:"medium","label-width":"110px",disabled:"详情"===e.regName}},[a("el-form-item",{staticClass:"block",attrs:{label:"到校报到时间"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.reg.dxbdsj,callback:function(t){e.$set(e.reg,"dxbdsj",t)},expression:"reg.dxbdsj"}})],1),a("el-form-item",{staticClass:"block",attrs:{label:"总结"}},["登记"===e.regName?a("el-upload",{attrs:{action:e.$proxy+"/upload/uploadFile",limit:1,"on-success":e.handleSuccess0}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[e._v("选择上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("期间的学习经历、参加的学术交流活动/会议、比赛等的总结，字数不少于1500字")])],1):e._e(),"详情"===e.regName&&null!==e.reg.hgzj?a("a",{staticClass:"download",attrs:{href:e.$proxy+e.$downloadUrl+e.reg.hgzj}},[e._v("回国（入境）总结")]):e._e()],1),a("el-form-item",{attrs:{label:"签证页"}},[a("el-upload",{staticClass:"img-upload",attrs:{action:e.$proxy+"/upload/uploadFile","show-file-list":!1,"on-success":e.handleSuccess1}},[e.reg.qzy?a("img",{staticClass:"img",attrs:{src:e.$proxy+e.imgUrl+e.reg.qzy}}):a("i",{staticClass:"el-icon-plus icon"})])],1),a("el-form-item",{attrs:{label:"出境页"}},[a("el-upload",{staticClass:"img-upload",attrs:{action:e.$proxy+"/upload/uploadFile","show-file-list":!1,"on-success":e.handleSuccess2}},[e.reg.cjy?a("img",{staticClass:"img",attrs:{src:e.$proxy+e.imgUrl+e.reg.cjy}}):a("i",{staticClass:"el-icon-plus icon"})])],1),a("el-form-item",{attrs:{label:"入境页"}},[a("el-upload",{staticClass:"img-upload",attrs:{action:e.$proxy+"/upload/uploadFile","show-file-list":!1,"on-success":e.handleSuccess3}},[e.reg.rjy?a("img",{staticClass:"img",attrs:{src:e.$proxy+e.imgUrl+e.reg.rjy}}):a("i",{staticClass:"el-icon-plus icon"})])],1),a("el-form-item",{staticClass:"block",attrs:{label:"其他资料或成果"}},[a("el-upload",{attrs:{action:e.$proxy+"/upload/uploadFile","file-list":e.cgzlList,"on-remove":e.handleRemove,"on-success":e.handleSuccess}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传doc/docx文件，且不超过2M")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"登记"===e.regName,expression:"regName==='登记'"}],staticClass:"block",attrs:{label:" "}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v("确认提交")])],1)],1)],1),a("el-card",{directives:[{name:"show",rawName:"v-show",value:"登记"!==e.regName,expression:"regName!=='登记'"}],attrs:{shadow:"hover"}},[a("header",{attrs:{slot:"header"},slot:"header"},[e._v("异动")]),a("el-form",{staticClass:"form-inline",attrs:{inline:"",size:"medium","label-width":"110px",disabled:"详情"===e.regName}},[a("el-form-item",{attrs:{label:"异动类型"}},[a("el-radio-group",{model:{value:e.abnormal.ydlx,callback:function(t){e.$set(e.abnormal,"ydlx",t)},expression:"abnormal.ydlx"}},[a("el-radio-button",{attrs:{label:"2"}},[e._v("中止")]),a("el-radio-button",{attrs:{label:"3"}},[e._v("延期")])],1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"3"===e.abnormal.ydlx,expression:"abnormal.ydlx==='3'"}],attrs:{label:"延期时间"}},[a("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.abnormal.yqsj,callback:function(t){e.$set(e.abnormal,"yqsj",t)},expression:"abnormal.yqsj"}})],1),a("el-form-item",{attrs:{label:"异动原因"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.abnormal.ydyy,callback:function(t){e.$set(e.abnormal,"ydyy",t)},expression:"abnormal.ydyy"}})],1),a("el-form-item",{attrs:{label:"相关材料"}},[a("el-upload",{attrs:{action:e.$proxy+"/upload/uploadFile","file-list":e.ydclList,"on-remove":e.handleRemove,"on-success":e.handleSuccess}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-upload"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传doc/docx文件，且不超过2M")])],1)],1)],1)],1)],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("fieldset",[a("legend",[e._v("详情")])])}],r=(a("7f7f"),a("2909")),o=a("be94"),i={name:"project",data:function(){return{placeList:[],deptList:[],applyProject:"",studentInfo:"",apply:"",returnInfo:"",reg:{id:"",applyId:"",projectId:"",studentId:"",hgzj:"",qzy:"",cjy:"",rjy:"",cgzl:"",dxbdsj:"",status:"1"},cgzlList:[],abnormal:{ydlx:"",yqsj:"",ydyy:"",ydcl:""},ydclList:[],imgUrl:"/resource/showImg?path=",fileList:[],archiveFileList:[]}},computed:{role:function(){return this.$store.state.role},regId:function(){return this.$store.state.regId},regName:function(){return this.$store.state.regName}},created:function(){this.getInfo(),""===this.regId&&this.$router.push("/project/reg/list")},methods:{getInfo:function(){var e=this;this.$ajax.post("/projectReturn/queryResult",{proResId:this.regId}).then(function(t){e.applyProject=Object(o["a"])({},t.data.data.data.project.sqlRow),e.studentInfo=Object(o["a"])({},t.data.data.data.student),e.apply=Object(o["a"])({},t.data.data.data.projectResult),null!==t.data.data.data.projectReturn.return&&"详情"===e.regName&&(e.reg=Object(o["a"])({},t.data.data.data.projectReturn.return),e.cgzlList=Object(r["a"])(t.data.data.data.projectReturn.cgzlList),e.abnormal=Object(o["a"])({},t.data.data.data.projectReturn.return),e.ydclList=Object(r["a"])(t.data.data.data.projectReturn.ydclList)),null!==t.data.data.data.projectReturn.return&&"详情"!==e.regName&&(e.returnInfo=Object(o["a"])({},t.data.data.data.projectReturn.return))})},handleSuccess0:function(e,t,a){"0"===e.errcode?this.reg.hgzj=e.path:this.$message.error(e.errmsg)},handleSuccess1:function(e,t,a){"0"===e.errcode?this.reg.qzy=e.path:this.$message.error(e.errmsg)},handleSuccess2:function(e,t,a){"0"===e.errcode?this.reg.cjy=e.path:this.$message.error(e.errmsg)},handleSuccess3:function(e,t,a){"0"===e.errcode?this.reg.rjy=e.path:this.$message.error(e.errmsg)},handleRemove:function(e,t){var a=this;console.log(e);var l=e.url?e.url:e.response.path;this.$ajax.post("/resource/deleteFile",{path:l}).then(function(e){"0"===e.data.errcode?(a.fileList=Object(r["a"])(t),console.log(a.fileList)):a.$message.error(e.data.errmsg)})},handleSuccess:function(e,t,a){"0"===e.errcode?(this.fileList=Object(r["a"])(a),console.log(this.fileList)):this.$message.error(e.message)},submitForm:function(){var e=this;this.reg.id=this.returnInfo.id,this.reg.applyId=this.apply.id,this.reg.studentId=this.studentInfo.id,this.reg.projectId=this.applyProject.id,this.archiveFileList=[];for(var t=0;t<this.fileList.length;t++)this.fileList[t].response?this.archiveFileList.push({url:this.fileList[t].response.path,name:this.fileList[t].name}):this.archiveFileList.push({url:this.fileList[t].url,name:this.fileList[t].name});this.archiveFileList.length>0&&(this.reg.cgzl=JSON.stringify(this.archiveFileList)),this.$ajax.post("/projectReturn/checkIn",this.reg).then(function(t){"0"===t.data.errcode?(e.$message.success("登记成功"),e.$router.push("/project/reg/list")):e.$message.error(t.data.errmsg)})}}},n=i,c=(a("c003"),a("2877")),p=Object(c["a"])(n,l,s,!1,null,null,null);p.options.__file="normal.vue";t["default"]=p.exports},"91c9":function(e,t,a){},be94:function(e,t,a){"use strict";function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),s.forEach(function(t){l(e,t,a[t])})}return e}a.d(t,"a",function(){return s})},c003:function(e,t,a){"use strict";var l=a("91c9"),s=a.n(l);s.a}}]);
//# sourceMappingURL=chunk-cc186e78.c1acc8c3.js.map